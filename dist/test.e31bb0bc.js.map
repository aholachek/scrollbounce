{"version":3,"sources":["../node_modules/process/browser.js","../node_modules/rebound/dist/rebound.js","../src/index.js","index.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","global","factory","define","amd","rebound","_onFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","setImmediate","callback","_onFrame$1","slice","bind","func","context","_len","outerArgs","_key","_len2","innerArgs","_key2","extend","target","source","key","hasOwnProperty","onFrame","removeFirst","item","idx","indexOf","splice","colorCache","hexToRGB","colorString","normalizedColor","replace","parts","match","ret","r","parseInt","g","b","rgbToHex","rNum","gNum","bNum","toString","util","Object","freeze","mapValueInRange","value","fromLow","fromHigh","toLow","toHigh","fromRangeSize","toRangeSize","valueScale","interpolateColor","val","startColorStr","endColorStr","undefined","asRGB","startColor","endColor","Math","floor","degreesToRadians","deg","PI","radiansToDegrees","rad","MathUtil","tensionFromOrigamiValue","oValue","origamiValueFromTension","tension","frictionFromOrigamiValue","origamiFromFriction","friction","OrigamiValueConverter","classCallCheck","instance","Constructor","TypeError","_extends","assign","AnimationLooper","springSystem","getSpringSystem","loop","Date","now","SimulationLooper","timestep","time","running","getIsIdle","SteppingSimulationLooper","step","Loopers","BouncyConversion","bounciness","speed","normalize","projectNormal","s","bouncyTension","bouncyFriction","quadraticOutInterpolation","b3Nobounce","startValue","endValue","n","start","end","linearInterpolation","t","b3Friction1","x","pow","b3Friction2","b3Friction3","SpringConfig","fromOrigamiTensionAndFriction","fromBouncinessAndSpeed","bouncyConversion","coastingConfigWithOrigamiFriction","DEFAULT_ORIGAMI_SPRING_CONFIG","PhysicsState","position","velocity","Spring","_startValue","_currentState","_displacementFromRestThreshold","_endValue","_overshootClampingEnabled","_previousState","_restSpeedThreshold","_tempState","_timeAccumulator","_wasAtRest","_id","_ID","_springSystem","destroy","deregisterSpring","getId","setSpringConfig","springConfig","_springConfig","getSpringConfig","setCurrentValue","currentValue","skipSetAtRest","setAtRest","notifyPositionUpdated","getStartValue","getCurrentValue","getCurrentDisplacementDistance","getDisplacementDistanceForState","state","abs","setEndValue","isAtRest","activateSpring","listener","onChange","onSpringEndStateChange","getEndValue","setVelocity","getVelocity","setRestSpeedThreshold","restSpeedThreshold","getRestSpeedThreshold","setRestDisplacementThreshold","displacementFromRestThreshold","getRestDisplacementThreshold","setOvershootClampingEnabled","enabled","isOvershootClampingEnabled","isOvershooting","advance","realDeltaTime","adjustedDeltaTime","MAX_DELTA_TIME_SEC","tempPosition","tempVelocity","aVelocity","aAcceleration","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","dxdt","dvdt","SOLVER_TIMESTEP_SEC","_interpolate","notifyActivate","notifyAtRest","onSpringActivate","onSpringUpdate","onSpringAtRest","systemShouldAdvance","wasAtRest","alpha","getListeners","newListener","listenerToRemove","currentValueIsApproximately","SpringSystem","looper","_activeSprings","_idleSpringIndices","_isIdle","_lastTimeMillis","_springRegistry","setLooper","createSpring","createSpringWithConfig","createSpringWithBouncinessAndSpeed","spring","registerSpring","getSpringById","id","getAllSprings","vals","deltaTime","pop","currentTimeMillis","ellapsedMillis","onBeforeIntegrate","onAfterIntegrate","springId","index","getViewportCoords","height","document","documentElement","clientHeight","width","clientWidth","getScrollHeight","max","body","scrollHeight","offsetHeight","rectInViewport","top","bottom","left","right","windowWidth","windowHeight","rectCloseToViewport","initScrollBounce","effectMultiplier","bounceChildren","from","querySelectorAll","offset","pageYOffset","springs","map","child","_spring","style","transform","reduce","acc","curr","dataset","bounceId","resetSprings","keys","forEach","cache","getCenter","bounding","onScroll","fastScroll","diff","viewportCoords","newOffset","closestChild","querySelector","closestBounceId","closestChildIndex","animatedChildrenDict","animatedAboveIndex","animatedBelowIndex","scrollDown","el","getBoundingClientRect","isAnimated","animatedChildren","filter","c","willChange","resistance","clientY","scrollListener","onTouchStart","event","addEventListener","targetTouches","closestElTuple","onTouchEnd","removeEventListener","onTouchMove","ul","li","createElement","appendChild"],"mappings":"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,CCEX,CAAT,CDFmB,EAAM,ACENkB,ACbE,CFWF,CAAjB,CEXsB,CAArB,IAA0BiS,CDaD,CAAC5O,ICbM,CDaP,CAA5B,CCbsC,CAACgP,YAAD,GAAgB,CAA1D;AFYG,ACEA,ACbJ,CAFD,EFSyB,CAKrB;;ACGAvP,ACbJ,IAAMyP,EDaFzP,IAAI,CAACxC,KAAL,CAAWyC,GCbO,GAAG,CDarB,EAAoBvD,MAAM,ACbxB+S,CDayBxT,IAAP,CAAYkE,SAAZ,CCbC,CDasBL,ECba,GDaR,CAAC7D,IAAN,CAAWqE,SAAX,CAAvB,CAApB;ADFA,ACGD,ACdyD,KDQ1D,CDGM,CAAC/E,gBAAgB,KAAKE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEK,UAApE,EAAgF,AEX/B,EAAO;AFYpDL,ACGP,ACf2D,GDpBvC,CDgCbA,ACKR,gBDLwB,GAAGK,UAAnB,GEZoB8T,gBAAgC;AFapD,AEboD,MAAhCA,KFab9T,UAAU,CAACI,AEbkC,GFanC,EAAM,CAAN,CAAjB,+BEbuC,CAAa;AFcvD;ACIL,ACjBE,MAAM+I,KDiBCvE,MAAT,CAAgBC,ACjBI,GAAG,GDiBvB,CCjB2BmM,CDiBHlM,MAAxB,EAAgC,YCjBT,EAArB;AFcE,ACIF,AChBA,MFYM,AEZAiP,GDgBD,IAAIhP,GAAT,IAAgBD,AChBI,GAAGzD,GDgBvB,EAAwB,AChBI,CAAC2S,IAAN,CACrBrB,QAAQ,CAACsB,gBAAT,CAA0B,kBAA1B,CADqB,CAAvB;AFaM,ACIJ,ACbF,MAAIC,IDaEpP,ECbI,GAAGrB,CDaD,CAACuB,ICbM,CAACmP,SDad,CAAsBpP,CCb5B,EDaM,CAAJ,EAAgC;ADH5B,ACIFF,ACZJ,MAAMuP,EDYFvP,GDJSlF,EERA,CDYH,CAACoF,CCZKgP,EDYN,CAAN,GAAcjP,KDJW,CAAC1E,ACIN,CAAC2E,CCZK,CFQD,AEP1BsP,CDWqB,CDJW,ACI/B,CDJyB,AERb,CFQV,AEPC,UAAAC,KAAK,EAAI;AFQb,ACIA,ACXC,GFIF,CAGE,IEPM3C,GFOA1R,CAAN,EAAQ,AEPI,GAAGkJ,YAAY,CAACqI,YAAb,EAAf;AFQE,ACIL,ACVGG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eAAe,CAAC,CAAD,CAApC,GAA0CA,eAAe,CAAC,CAAD,CAAzD,GAA+DA,eAAe,CAAC,CAAD,CAA9E,GAAoFA,eAAe,CAAC,CAAD,CAAnG,GAAyGA,eAAe,CAAC,CAAD,CAA1I;ADDQ,ACET,ACJC,QAAI+P,KFEW7V,IEFF,IAAIsV,KAAK,CAAC/B,IFEU,CAAC9S,IAAnB,CAAwB,EEFtB,EFEF,CEFuB6U,CFEO3U,IEFF,CAACiV,CFE7B,CAAP,YEF8B,CAAqB9C,MAA3D,EAAmE;AFG9D,AEFH;AFGD,ACCH,ACHG,QDGC9M,KAAK,GAAGF,eAAe,CAACG,KAAhB,CAAsB,OAAtB,CAAZ;ADGD;ACFC,ACHE,QDGE,ACHI0P,CDGH3P,GCHO,EDGR,CCHWsO,GDGDtO,GCHO,EDGF,CAAC/E,ACHI4U,MDGV,GAAe,ACH3B,CDGF,EAAgC;ADGlC,ACFI,ACFA,IFIAjV,IEJMkV,CFID,GAAG,ACFF,EDEV,ECFc5V,ICFQ,CDEZ,CAAU,CCFK6S,QAAQ,CAACgD,aAAT,CAAuB,mBDEtC,CAAN,SCDsBT,KAAK,CAACU,eADgB,SAAvB,CAArB;AFKJ,ACFG,ACCC,IFCAnV,IEDMoV,IFCE,GAAG,KAAf,KED2B,GAAG9B,cAAc,CAAC1O,OAAf,CAAuBqQ,YAAvB,CAA1B;AFEJ,AEAI,IFAAhV,IEAMoV,QFAV,YEA8B,GAAG,EAA7B;AFCJ,ACFE,ACGE,IFDAnV,ICFEmF,ACGEiQ,GDHC,GDEK,ACFF,GDEK,CAAC,CAAlB,OEC0B,GAAGF,iBAAiB,GAAG,CAA7C;ADFA9P,ACGA,MDHAA,CAAC,CCGGiQ,CDHDhQ,QAAQ,CAACJ,KAAK,CAAC,CAAD,CAAN,ACGW,EDHA,CCGGiQ,CDHd,CADH,eCIkC,GAAG,CAA7C;AFAJ,ACFI5P,ACIA,MDJAA,CAAC,CCIKgQ,CFFDrV,ACFFoF,QAAQ,CAACJ,ACII,GAAG2P,EDJF,CDErB,ACFsB,CAAD,ACIM,CDJZ,CDEY,CCFD,ACII,CAA1B,CDJW,CAFH;ADKR,ACFArP,MDEI,ACFJA,CDEKzF,ACFJ,EAAEuF,MDEC,ECFO,CAACJ,CDEK,CAAClF,GCFD,CAAC,CAAD,CAAN,EAAW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","file":"test.e31bb0bc.js","sourceRoot":"../test","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.rebound = factory());\n}(this, (function () { 'use strict';\n\nvar _onFrame = void 0;\nif (typeof window !== 'undefined') {\n  _onFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;\n}\n\nif (!_onFrame && typeof process !== 'undefined' && process.title === 'node') {\n  _onFrame = setImmediate;\n}\n\n_onFrame = _onFrame || function (callback) {\n  window.setTimeout(callback, 1000 / 60);\n};\n\nvar _onFrame$1 = _onFrame;\n\n/* eslint-disable flowtype/no-weak-types */\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\n// Bind a function to a context object.\nfunction bind(func, context) {\n  for (var _len = arguments.length, outerArgs = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    outerArgs[_key - 2] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, innerArgs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      innerArgs[_key2] = arguments[_key2];\n    }\n\n    func.apply(context, concat.call(outerArgs, slice.call(innerArgs)));\n  };\n}\n\n// Add all the properties in the source to the target.\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n}\n\n// Cross browser/node timer functions.\nfunction onFrame(func) {\n  return _onFrame$1(func);\n}\n\n// Lop off the first occurence of the reference in the Array.\nfunction removeFirst(array, item) {\n  var idx = array.indexOf(item);\n  idx !== -1 && array.splice(idx, 1);\n}\n\nvar colorCache = {};\n/**\n * Converts a hex-formatted color string to its rgb-formatted equivalent. Handy\n * when performing color tweening animations\n * @public\n * @param colorString A hex-formatted color string\n * @return An rgb-formatted color string\n */\nfunction hexToRGB(colorString) {\n  if (colorCache[colorString]) {\n    return colorCache[colorString];\n  }\n  var normalizedColor = colorString.replace('#', '');\n  if (normalizedColor.length === 3) {\n    normalizedColor = normalizedColor[0] + normalizedColor[0] + normalizedColor[1] + normalizedColor[1] + normalizedColor[2] + normalizedColor[2];\n  }\n  var parts = normalizedColor.match(/.{2}/g);\n  if (!parts || parts.length < 3) {\n    throw new Error('Expected a color string of format #rrggbb');\n  }\n\n  var ret = {\n    r: parseInt(parts[0], 16),\n    g: parseInt(parts[1], 16),\n    b: parseInt(parts[2], 16)\n  };\n\n  colorCache[colorString] = ret;\n  return ret;\n}\n\n/**\n * Converts a rgb-formatted color string to its hex-formatted equivalent. Handy\n * when performing color tweening animations\n * @public\n * @param colorString An rgb-formatted color string\n * @return A hex-formatted color string\n */\nfunction rgbToHex(rNum, gNum, bNum) {\n  var r = rNum.toString(16);\n  var g = gNum.toString(16);\n  var b = bNum.toString(16);\n  r = r.length < 2 ? '0' + r : r;\n  g = g.length < 2 ? '0' + g : g;\n  b = b.length < 2 ? '0' + b : b;\n  return '#' + r + g + b;\n}\n\nvar util = Object.freeze({\n\tbind: bind,\n\textend: extend,\n\tonFrame: onFrame,\n\tremoveFirst: removeFirst,\n\thexToRGB: hexToRGB,\n\trgbToHex: rgbToHex\n});\n\n/**\n * This helper function does a linear interpolation of a value from\n * one range to another. This can be very useful for converting the\n * motion of a Spring to a range of UI property values. For example a\n * spring moving from position 0 to 1 could be interpolated to move a\n * view from pixel 300 to 350 and scale it from 0.5 to 1. The current\n * position of the `Spring` just needs to be run through this method\n * taking its input range in the _from_ parameters with the property\n * animation range in the _to_ parameters.\n * @public\n */\nfunction mapValueInRange(value, fromLow, fromHigh, toLow, toHigh) {\n  var fromRangeSize = fromHigh - fromLow;\n  var toRangeSize = toHigh - toLow;\n  var valueScale = (value - fromLow) / fromRangeSize;\n  return toLow + valueScale * toRangeSize;\n}\n\n/**\n * Interpolate two hex colors in a 0 - 1 range or optionally provide a\n * custom range with fromLow,fromHight. The output will be in hex by default\n * unless asRGB is true in which case it will be returned as an rgb string.\n *\n * @public\n * @param asRGB Whether to return an rgb-style string\n * @return A string in hex color format unless asRGB is true, in which case a string in rgb format\n */\nfunction interpolateColor(val, startColorStr, endColorStr) {\n  var fromLow = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var fromHigh = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var asRGB = arguments[5];\n\n  var startColor = hexToRGB(startColorStr);\n  var endColor = hexToRGB(endColorStr);\n  var r = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.r, endColor.r));\n  var g = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.g, endColor.g));\n  var b = Math.floor(mapValueInRange(val, fromLow, fromHigh, startColor.b, endColor.b));\n  if (asRGB) {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else {\n    return rgbToHex(r, g, b);\n  }\n}\n\nfunction degreesToRadians(deg) {\n  return deg * Math.PI / 180;\n}\n\nfunction radiansToDegrees(rad) {\n  return rad * 180 / Math.PI;\n}\n\nvar MathUtil = Object.freeze({\n\tmapValueInRange: mapValueInRange,\n\tinterpolateColor: interpolateColor,\n\tdegreesToRadians: degreesToRadians,\n\tradiansToDegrees: radiansToDegrees\n});\n\n// Math for converting from\n// [Origami](http://facebook.github.io/origami/) to\n// [Rebound](http://facebook.github.io/rebound).\n// You mostly don't need to worry about this, just use\n// SpringConfig.fromOrigamiTensionAndFriction(v, v);\n\nfunction tensionFromOrigamiValue(oValue) {\n  return (oValue - 30.0) * 3.62 + 194.0;\n}\n\nfunction origamiValueFromTension(tension) {\n  return (tension - 194.0) / 3.62 + 30.0;\n}\n\nfunction frictionFromOrigamiValue(oValue) {\n  return (oValue - 8.0) * 3.0 + 25.0;\n}\n\nfunction origamiFromFriction(friction) {\n  return (friction - 25.0) / 3.0 + 8.0;\n}\n\nvar OrigamiValueConverter = Object.freeze({\n\ttensionFromOrigamiValue: tensionFromOrigamiValue,\n\torigamiValueFromTension: origamiValueFromTension,\n\tfrictionFromOrigamiValue: frictionFromOrigamiValue,\n\torigamiFromFriction: origamiFromFriction\n});\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Plays each frame of the SpringSystem on animation\n * timing loop. This is the default type of looper for a new spring system\n * as it is the most common when developing UI.\n * @public\n */\n/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n * \n */\n\nvar AnimationLooper = function () {\n  function AnimationLooper() {\n    classCallCheck(this, AnimationLooper);\n    this.springSystem = null;\n  }\n\n  AnimationLooper.prototype.run = function run() {\n    var springSystem = getSpringSystem.call(this);\n\n    onFrame(function () {\n      springSystem.loop(Date.now());\n    });\n  };\n\n  return AnimationLooper;\n}();\n\n/**\n * Resolves the SpringSystem to a resting state in a\n * tight and blocking loop. This is useful for synchronously generating\n * pre-recorded animations that can then be played on a timing loop later.\n * Sometimes this lead to better performance to pre-record a single spring\n * curve and use it to drive many animations; however, it can make dynamic\n * response to user input a bit trickier to implement.\n * @public\n */\nvar SimulationLooper = function () {\n  function SimulationLooper(timestep) {\n    classCallCheck(this, SimulationLooper);\n    this.springSystem = null;\n    this.time = 0;\n    this.running = false;\n\n    this.timestep = timestep || 16.667;\n  }\n\n  SimulationLooper.prototype.run = function run() {\n    var springSystem = getSpringSystem.call(this);\n\n    if (this.running) {\n      return;\n    }\n    this.running = true;\n    while (!springSystem.getIsIdle()) {\n      springSystem.loop(this.time += this.timestep);\n    }\n    this.running = false;\n  };\n\n  return SimulationLooper;\n}();\n\n/**\n * Resolves the SpringSystem one step at a\n * time controlled by an outside loop. This is useful for testing and\n * verifying the behavior of a SpringSystem or if you want to control your own\n * timing loop for some reason e.g. slowing down or speeding up the\n * simulation.\n * @public\n */\nvar SteppingSimulationLooper = function () {\n  function SteppingSimulationLooper() {\n    classCallCheck(this, SteppingSimulationLooper);\n    this.springSystem = null;\n    this.time = 0;\n    this.running = false;\n  }\n\n  SteppingSimulationLooper.prototype.run = function run() {}\n  // this.run is NOOP'd here to allow control from the outside using\n  // this.step.\n\n\n  // Perform one step toward resolving the SpringSystem.\n  ;\n\n  SteppingSimulationLooper.prototype.step = function step(timestep) {\n    var springSystem = getSpringSystem.call(this);\n    springSystem.loop(this.time += timestep);\n  };\n\n  return SteppingSimulationLooper;\n}();\n\nfunction getSpringSystem() {\n  if (this.springSystem == null) {\n    throw new Error('cannot run looper without a springSystem');\n  }\n  return this.springSystem;\n}\n\n\n\nvar Loopers = Object.freeze({\n\tAnimationLooper: AnimationLooper,\n\tSimulationLooper: SimulationLooper,\n\tSteppingSimulationLooper: SteppingSimulationLooper\n});\n\n/**\n * Provides math for converting from Origami PopAnimation\n * config values to regular Origami tension and friction values. If you are\n * trying to replicate prototypes made with PopAnimation patches in Origami,\n * then you should create your springs with\n * SpringSystem.createSpringWithBouncinessAndSpeed, which uses this Math\n * internally to create a spring to match the provided PopAnimation\n * configuration from Origami.\n */\nvar BouncyConversion = function () {\n  function BouncyConversion(bounciness, speed) {\n    classCallCheck(this, BouncyConversion);\n\n    this.bounciness = bounciness;\n    this.speed = speed;\n\n    var b = this.normalize(bounciness / 1.7, 0, 20.0);\n    b = this.projectNormal(b, 0.0, 0.8);\n    var s = this.normalize(speed / 1.7, 0, 20.0);\n\n    this.bouncyTension = this.projectNormal(s, 0.5, 200);\n    this.bouncyFriction = this.quadraticOutInterpolation(b, this.b3Nobounce(this.bouncyTension), 0.01);\n  }\n\n  BouncyConversion.prototype.normalize = function normalize(value, startValue, endValue) {\n    return (value - startValue) / (endValue - startValue);\n  };\n\n  BouncyConversion.prototype.projectNormal = function projectNormal(n, start, end) {\n    return start + n * (end - start);\n  };\n\n  BouncyConversion.prototype.linearInterpolation = function linearInterpolation(t, start, end) {\n    return t * end + (1.0 - t) * start;\n  };\n\n  BouncyConversion.prototype.quadraticOutInterpolation = function quadraticOutInterpolation(t, start, end) {\n    return this.linearInterpolation(2 * t - t * t, start, end);\n  };\n\n  BouncyConversion.prototype.b3Friction1 = function b3Friction1(x) {\n    return 0.0007 * Math.pow(x, 3) - 0.031 * Math.pow(x, 2) + 0.64 * x + 1.28;\n  };\n\n  BouncyConversion.prototype.b3Friction2 = function b3Friction2(x) {\n    return 0.000044 * Math.pow(x, 3) - 0.006 * Math.pow(x, 2) + 0.36 * x + 2;\n  };\n\n  BouncyConversion.prototype.b3Friction3 = function b3Friction3(x) {\n    return 0.00000045 * Math.pow(x, 3) - 0.000332 * Math.pow(x, 2) + 0.1078 * x + 5.84;\n  };\n\n  BouncyConversion.prototype.b3Nobounce = function b3Nobounce(tension) {\n    var friction = 0;\n    if (tension <= 18) {\n      friction = this.b3Friction1(tension);\n    } else if (tension > 18 && tension <= 44) {\n      friction = this.b3Friction2(tension);\n    } else {\n      friction = this.b3Friction3(tension);\n    }\n    return friction;\n  };\n\n  return BouncyConversion;\n}();\n\n/**\n * Maintains a set of tension and friction constants\n * for a Spring. You can use fromOrigamiTensionAndFriction to convert\n * values from the [Origami](http://facebook.github.io/origami/)\n * design tool directly to Rebound spring constants.\n * @public\n */\n\nvar SpringConfig = function () {\n\n  /**\n   * Convert an origami Spring tension and friction to Rebound spring\n   * constants. If you are prototyping a design with Origami, this\n   * makes it easy to make your springs behave exactly the same in\n   * Rebound.\n   * @public\n   */\n  SpringConfig.fromOrigamiTensionAndFriction = function fromOrigamiTensionAndFriction(tension, friction) {\n    return new SpringConfig(tensionFromOrigamiValue(tension), frictionFromOrigamiValue(friction));\n  };\n\n  /**\n   * Convert an origami PopAnimation Spring bounciness and speed to Rebound\n   * spring constants. If you are using PopAnimation patches in Origami, this\n   * utility will provide springs that match your prototype.\n   * @public\n   */\n\n\n  SpringConfig.fromBouncinessAndSpeed = function fromBouncinessAndSpeed(bounciness, speed) {\n    var bouncyConversion = new BouncyConversion(bounciness, speed);\n    return SpringConfig.fromOrigamiTensionAndFriction(bouncyConversion.bouncyTension, bouncyConversion.bouncyFriction);\n  };\n\n  /**\n   * Create a SpringConfig with no tension or a coasting spring with some\n   * amount of Friction so that it does not coast infininitely.\n   * @public\n   */\n\n\n  SpringConfig.coastingConfigWithOrigamiFriction = function coastingConfigWithOrigamiFriction(friction) {\n    return new SpringConfig(0, frictionFromOrigamiValue(friction));\n  };\n\n  function SpringConfig(tension, friction) {\n    classCallCheck(this, SpringConfig);\n\n    this.tension = tension;\n    this.friction = friction;\n  }\n\n  return SpringConfig;\n}();\n\nSpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG = SpringConfig.fromOrigamiTensionAndFriction(40, 7);\n\n/**\n * Consists of a position and velocity. A Spring uses\n * this internally to keep track of its current and prior position and\n * velocity values.\n */\nvar PhysicsState = function PhysicsState() {\n  classCallCheck(this, PhysicsState);\n  this.position = 0;\n  this.velocity = 0;\n};\n\n/**\n * Provides a model of a classical spring acting to\n * resolve a body to equilibrium. Springs have configurable\n * tension which is a force multipler on the displacement of the\n * spring from its rest point or `endValue` as defined by [Hooke's\n * law](http://en.wikipedia.org/wiki/Hooke's_law). Springs also have\n * configurable friction, which ensures that they do not oscillate\n * infinitely. When a Spring is displaced by updating it's resting\n * or `currentValue`, the SpringSystems that contain that Spring\n * will automatically start looping to solve for equilibrium. As each\n * timestep passes, `SpringListener` objects attached to the Spring\n * will be notified of the updates providing a way to drive an\n * animation off of the spring's resolution curve.\n * @public\n */\n\nvar Spring = function () {\n  function Spring(springSystem) {\n    classCallCheck(this, Spring);\n    this.listeners = [];\n    this._startValue = 0;\n    this._currentState = new PhysicsState();\n    this._displacementFromRestThreshold = 0.001;\n    this._endValue = 0;\n    this._overshootClampingEnabled = false;\n    this._previousState = new PhysicsState();\n    this._restSpeedThreshold = 0.001;\n    this._tempState = new PhysicsState();\n    this._timeAccumulator = 0;\n    this._wasAtRest = true;\n\n    this._id = 's' + Spring._ID++;\n    this._springSystem = springSystem;\n  }\n\n  /**\n   * Remove a Spring from simulation and clear its listeners.\n   * @public\n   */\n\n\n  Spring.prototype.destroy = function destroy() {\n    this.listeners = [];\n    this._springSystem.deregisterSpring(this);\n  };\n\n  /**\n   * Get the id of the spring, which can be used to retrieve it from\n   * the SpringSystems it participates in later.\n   * @public\n   */\n\n\n  Spring.prototype.getId = function getId() {\n    return this._id;\n  };\n\n  /**\n   * Set the configuration values for this Spring. A SpringConfig\n   * contains the tension and friction values used to solve for the\n   * equilibrium of the Spring in the physics loop.\n   * @public\n   */\n\n\n  Spring.prototype.setSpringConfig = function setSpringConfig(springConfig) {\n    this._springConfig = springConfig;\n    return this;\n  };\n\n  /**\n   * Retrieve the SpringConfig used by this Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getSpringConfig = function getSpringConfig() {\n    return this._springConfig;\n  };\n\n  /**\n   * Set the current position of this Spring. Listeners will be updated\n   * with this value immediately. If the rest or `endValue` is not\n   * updated to match this value, then the spring will be dispalced and\n   * the SpringSystem will start to loop to restore the spring to the\n   * `endValue`.\n   *\n   * A common pattern is to move a Spring around without animation by\n   * calling.\n   *\n   * ```\n   * spring.setCurrentValue(n).setAtRest();\n   * ```\n   *\n   * This moves the Spring to a new position `n`, sets the endValue\n   * to `n`, and removes any velocity from the `Spring`. By doing\n   * this you can allow the `SpringListener` to manage the position\n   * of UI elements attached to the spring even when moving without\n   * animation. For example, when dragging an element you can\n   * update the position of an attached view through a spring\n   * by calling `spring.setCurrentValue(x)`. When\n   * the gesture ends you can update the Springs\n   * velocity and endValue\n   * `spring.setVelocity(gestureEndVelocity).setEndValue(flingTarget)`\n   * to cause it to naturally animate the UI element to the resting\n   * position taking into account existing velocity. The codepaths for\n   * synchronous movement and spring driven animation can\n   * be unified using this technique.\n   * @public\n   */\n\n\n  Spring.prototype.setCurrentValue = function setCurrentValue(currentValue, skipSetAtRest) {\n    this._startValue = currentValue;\n    this._currentState.position = currentValue;\n    if (!skipSetAtRest) {\n      this.setAtRest();\n    }\n    this.notifyPositionUpdated(false, false);\n    return this;\n  };\n\n  /**\n   * Get the position that the most recent animation started at. This\n   * can be useful for determining the number off oscillations that\n   * have occurred.\n   * @public\n   */\n\n\n  Spring.prototype.getStartValue = function getStartValue() {\n    return this._startValue;\n  };\n\n  /**\n   * Retrieve the current value of the Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getCurrentValue = function getCurrentValue() {\n    return this._currentState.position;\n  };\n\n  /**\n   * Get the absolute distance of the Spring from its resting endValue\n   * position.\n   * @public\n   */\n\n\n  Spring.prototype.getCurrentDisplacementDistance = function getCurrentDisplacementDistance() {\n    return this.getDisplacementDistanceForState(this._currentState);\n  };\n\n  /**\n   * Get the absolute distance of the Spring from a given state value\n   */\n\n\n  Spring.prototype.getDisplacementDistanceForState = function getDisplacementDistanceForState(state) {\n    return Math.abs(this._endValue - state.position);\n  };\n\n  /**\n   * Set the endValue or resting position of the spring. If this\n   * value is different than the current value, the SpringSystem will\n   * be notified and will begin running its solver loop to resolve\n   * the Spring to equilibrium. Any listeners that are registered\n   * for onSpringEndStateChange will also be notified of this update\n   * immediately.\n   * @public\n   */\n\n\n  Spring.prototype.setEndValue = function setEndValue(endValue) {\n    if (this._endValue === endValue && this.isAtRest()) {\n      return this;\n    }\n    this._startValue = this.getCurrentValue();\n    this._endValue = endValue;\n    this._springSystem.activateSpring(this.getId());\n    for (var i = 0, len = this.listeners.length; i < len; i++) {\n      var listener = this.listeners[i];\n      var onChange = listener.onSpringEndStateChange;\n      onChange && onChange(this);\n    }\n    return this;\n  };\n\n  /**\n   * Retrieve the endValue or resting position of this spring.\n   * @public\n   */\n\n\n  Spring.prototype.getEndValue = function getEndValue() {\n    return this._endValue;\n  };\n\n  /**\n   * Set the current velocity of the Spring, in pixels per second. As\n   * previously mentioned, this can be useful when you are performing\n   * a direct manipulation gesture. When a UI element is released you\n   * may call setVelocity on its animation Spring so that the Spring\n   * continues with the same velocity as the gesture ended with. The\n   * friction, tension, and displacement of the Spring will then\n   * govern its motion to return to rest on a natural feeling curve.\n   * @public\n   */\n\n\n  Spring.prototype.setVelocity = function setVelocity(velocity) {\n    if (velocity === this._currentState.velocity) {\n      return this;\n    }\n    this._currentState.velocity = velocity;\n    this._springSystem.activateSpring(this.getId());\n    return this;\n  };\n\n  /**\n   * Get the current velocity of the Spring, in pixels per second.\n   * @public\n   */\n\n\n  Spring.prototype.getVelocity = function getVelocity() {\n    return this._currentState.velocity;\n  };\n\n  /**\n   * Set a threshold value for the movement speed of the Spring below\n   * which it will be considered to be not moving or resting.\n   * @public\n   */\n\n\n  Spring.prototype.setRestSpeedThreshold = function setRestSpeedThreshold(restSpeedThreshold) {\n    this._restSpeedThreshold = restSpeedThreshold;\n    return this;\n  };\n\n  /**\n   * Retrieve the rest speed threshold for this Spring.\n   * @public\n   */\n\n\n  Spring.prototype.getRestSpeedThreshold = function getRestSpeedThreshold() {\n    return this._restSpeedThreshold;\n  };\n\n  /**\n   * Set a threshold value for displacement below which the Spring\n   * will be considered to be not displaced i.e. at its resting\n   * `endValue`.\n   * @public\n   */\n\n\n  Spring.prototype.setRestDisplacementThreshold = function setRestDisplacementThreshold(displacementFromRestThreshold) {\n    this._displacementFromRestThreshold = displacementFromRestThreshold;\n  };\n\n  /**\n   * Retrieve the rest displacement threshold for this spring.\n   * @public\n   */\n\n\n  Spring.prototype.getRestDisplacementThreshold = function getRestDisplacementThreshold() {\n    return this._displacementFromRestThreshold;\n  };\n\n  /**\n   * Enable overshoot clamping. This means that the Spring will stop\n   * immediately when it reaches its resting position regardless of\n   * any existing momentum it may have. This can be useful for certain\n   * types of animations that should not oscillate such as a scale\n   * down to 0 or alpha fade.\n   * @public\n   */\n\n\n  Spring.prototype.setOvershootClampingEnabled = function setOvershootClampingEnabled(enabled) {\n    this._overshootClampingEnabled = enabled;\n    return this;\n  };\n\n  /**\n   * Check if overshoot clamping is enabled for this spring.\n   * @public\n   */\n\n\n  Spring.prototype.isOvershootClampingEnabled = function isOvershootClampingEnabled() {\n    return this._overshootClampingEnabled;\n  };\n\n  /**\n   * Check if the Spring has gone past its end point by comparing\n   * the direction it was moving in when it started to the current\n   * position and end value.\n   * @public\n   */\n\n\n  Spring.prototype.isOvershooting = function isOvershooting() {\n    var start = this._startValue;\n    var end = this._endValue;\n    return this._springConfig.tension > 0 && (start < end && this.getCurrentValue() > end || start > end && this.getCurrentValue() < end);\n  };\n\n  /**\n   * The main solver method for the Spring. It takes\n   * the current time and delta since the last time step and performs\n   * an RK4 integration to get the new position and velocity state\n   * for the Spring based on the tension, friction, velocity, and\n   * displacement of the Spring.\n   * @public\n   */\n\n\n  Spring.prototype.advance = function advance(time, realDeltaTime) {\n    var isAtRest = this.isAtRest();\n\n    if (isAtRest && this._wasAtRest) {\n      return;\n    }\n\n    var adjustedDeltaTime = realDeltaTime;\n    if (realDeltaTime > Spring.MAX_DELTA_TIME_SEC) {\n      adjustedDeltaTime = Spring.MAX_DELTA_TIME_SEC;\n    }\n\n    this._timeAccumulator += adjustedDeltaTime;\n\n    var tension = this._springConfig.tension;\n    var friction = this._springConfig.friction;\n    var position = this._currentState.position;\n    var velocity = this._currentState.velocity;\n    var tempPosition = this._tempState.position;\n    var tempVelocity = this._tempState.velocity;\n    var aVelocity = void 0;\n    var aAcceleration = void 0;\n    var bVelocity = void 0;\n    var bAcceleration = void 0;\n    var cVelocity = void 0;\n    var cAcceleration = void 0;\n    var dVelocity = void 0;\n    var dAcceleration = void 0;\n    var dxdt = void 0;\n    var dvdt = void 0;\n\n    while (this._timeAccumulator >= Spring.SOLVER_TIMESTEP_SEC) {\n      this._timeAccumulator -= Spring.SOLVER_TIMESTEP_SEC;\n\n      if (this._timeAccumulator < Spring.SOLVER_TIMESTEP_SEC) {\n        this._previousState.position = position;\n        this._previousState.velocity = velocity;\n      }\n\n      aVelocity = velocity;\n      aAcceleration = tension * (this._endValue - tempPosition) - friction * velocity;\n\n      tempPosition = position + aVelocity * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      tempVelocity = velocity + aAcceleration * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      bVelocity = tempVelocity;\n      bAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      tempPosition = position + bVelocity * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      tempVelocity = velocity + bAcceleration * Spring.SOLVER_TIMESTEP_SEC * 0.5;\n      cVelocity = tempVelocity;\n      cAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      tempPosition = position + cVelocity * Spring.SOLVER_TIMESTEP_SEC;\n      tempVelocity = velocity + cAcceleration * Spring.SOLVER_TIMESTEP_SEC;\n      dVelocity = tempVelocity;\n      dAcceleration = tension * (this._endValue - tempPosition) - friction * tempVelocity;\n\n      dxdt = 1.0 / 6.0 * (aVelocity + 2.0 * (bVelocity + cVelocity) + dVelocity);\n      dvdt = 1.0 / 6.0 * (aAcceleration + 2.0 * (bAcceleration + cAcceleration) + dAcceleration);\n\n      position += dxdt * Spring.SOLVER_TIMESTEP_SEC;\n      velocity += dvdt * Spring.SOLVER_TIMESTEP_SEC;\n    }\n\n    this._tempState.position = tempPosition;\n    this._tempState.velocity = tempVelocity;\n\n    this._currentState.position = position;\n    this._currentState.velocity = velocity;\n\n    if (this._timeAccumulator > 0) {\n      this._interpolate(this._timeAccumulator / Spring.SOLVER_TIMESTEP_SEC);\n    }\n\n    if (this.isAtRest() || this._overshootClampingEnabled && this.isOvershooting()) {\n      if (this._springConfig.tension > 0) {\n        this._startValue = this._endValue;\n        this._currentState.position = this._endValue;\n      } else {\n        this._endValue = this._currentState.position;\n        this._startValue = this._endValue;\n      }\n      this.setVelocity(0);\n      isAtRest = true;\n    }\n\n    var notifyActivate = false;\n    if (this._wasAtRest) {\n      this._wasAtRest = false;\n      notifyActivate = true;\n    }\n\n    var notifyAtRest = false;\n    if (isAtRest) {\n      this._wasAtRest = true;\n      notifyAtRest = true;\n    }\n\n    this.notifyPositionUpdated(notifyActivate, notifyAtRest);\n  };\n\n  Spring.prototype.notifyPositionUpdated = function notifyPositionUpdated(notifyActivate, notifyAtRest) {\n    for (var i = 0, len = this.listeners.length; i < len; i++) {\n      var listener = this.listeners[i];\n      if (notifyActivate && listener.onSpringActivate) {\n        listener.onSpringActivate(this);\n      }\n\n      if (listener.onSpringUpdate) {\n        listener.onSpringUpdate(this);\n      }\n\n      if (notifyAtRest && listener.onSpringAtRest) {\n        listener.onSpringAtRest(this);\n      }\n    }\n  };\n\n  /**\n   * Check if the SpringSystem should advance. Springs are advanced\n   * a final frame after they reach equilibrium to ensure that the\n   * currentValue is exactly the requested endValue regardless of the\n   * displacement threshold.\n   * @public\n   */\n\n\n  Spring.prototype.systemShouldAdvance = function systemShouldAdvance() {\n    return !this.isAtRest() || !this.wasAtRest();\n  };\n\n  Spring.prototype.wasAtRest = function wasAtRest() {\n    return this._wasAtRest;\n  };\n\n  /**\n   * Check if the Spring is atRest meaning that it's currentValue and\n   * endValue are the same and that it has no velocity. The previously\n   * described thresholds for speed and displacement define the bounds\n   * of this equivalence check. If the Spring has 0 tension, then it will\n   * be considered at rest whenever its absolute velocity drops below the\n   * restSpeedThreshold.\n   * @public\n   */\n\n\n  Spring.prototype.isAtRest = function isAtRest() {\n    return Math.abs(this._currentState.velocity) < this._restSpeedThreshold && (this.getDisplacementDistanceForState(this._currentState) <= this._displacementFromRestThreshold || this._springConfig.tension === 0);\n  };\n\n  /**\n   * Force the spring to be at rest at its current position. As\n   * described in the documentation for setCurrentValue, this method\n   * makes it easy to do synchronous non-animated updates to ui\n   * elements that are attached to springs via SpringListeners.\n   * @public\n   */\n\n\n  Spring.prototype.setAtRest = function setAtRest() {\n    this._endValue = this._currentState.position;\n    this._tempState.position = this._currentState.position;\n    this._currentState.velocity = 0;\n    return this;\n  };\n\n  Spring.prototype._interpolate = function _interpolate(alpha) {\n    this._currentState.position = this._currentState.position * alpha + this._previousState.position * (1 - alpha);\n    this._currentState.velocity = this._currentState.velocity * alpha + this._previousState.velocity * (1 - alpha);\n  };\n\n  Spring.prototype.getListeners = function getListeners() {\n    return this.listeners;\n  };\n\n  Spring.prototype.addListener = function addListener(newListener) {\n    this.listeners.push(newListener);\n    return this;\n  };\n\n  Spring.prototype.removeListener = function removeListener(listenerToRemove) {\n    removeFirst(this.listeners, listenerToRemove);\n    return this;\n  };\n\n  Spring.prototype.removeAllListeners = function removeAllListeners() {\n    this.listeners = [];\n    return this;\n  };\n\n  Spring.prototype.currentValueIsApproximately = function currentValueIsApproximately(value) {\n    return Math.abs(this.getCurrentValue() - value) <= this.getRestDisplacementThreshold();\n  };\n\n  return Spring;\n}();\n\nSpring._ID = 0;\nSpring.MAX_DELTA_TIME_SEC = 0.064;\nSpring.SOLVER_TIMESTEP_SEC = 0.001;\n\n/**\n * A set of Springs that all run on the same physics\n * timing loop. To get started with a Rebound animation, first\n * create a new SpringSystem and then add springs to it.\n * @public\n */\n\nvar SpringSystem = function () {\n  function SpringSystem(looper) {\n    classCallCheck(this, SpringSystem);\n    this.listeners = [];\n    this._activeSprings = [];\n    this._idleSpringIndices = [];\n    this._isIdle = true;\n    this._lastTimeMillis = -1;\n    this._springRegistry = {};\n\n    this.looper = looper || new AnimationLooper();\n    this.looper.springSystem = this;\n  }\n\n  /**\n   * A SpringSystem is iterated by a looper. The looper is responsible\n   * for executing each frame as the SpringSystem is resolved to idle.\n   * There are three types of Loopers described below AnimationLooper,\n   * SimulationLooper, and SteppingSimulationLooper. AnimationLooper is\n   * the default as it is the most useful for common UI animations.\n   * @public\n   */\n\n\n  SpringSystem.prototype.setLooper = function setLooper(looper) {\n    this.looper = looper;\n    looper.springSystem = this;\n  };\n\n  /**\n   * Add a new spring to this SpringSystem. This Spring will now be solved for\n   * during the physics iteration loop. By default the spring will use the\n   * default Origami spring config with 40 tension and 7 friction, but you can\n   * also provide your own values here.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpring = function createSpring(tension, friction) {\n    var springConfig = void 0;\n    if (tension === undefined || friction === undefined) {\n      springConfig = SpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG;\n    } else {\n      springConfig = SpringConfig.fromOrigamiTensionAndFriction(tension, friction);\n    }\n    return this.createSpringWithConfig(springConfig);\n  };\n\n  /**\n   * Add a spring with a specified bounciness and speed. To replicate Origami\n   * compositions based on PopAnimation patches, use this factory method to\n   * create matching springs.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpringWithBouncinessAndSpeed = function createSpringWithBouncinessAndSpeed(bounciness, speed) {\n    var springConfig = void 0;\n    if (bounciness === undefined || speed === undefined) {\n      springConfig = SpringConfig.DEFAULT_ORIGAMI_SPRING_CONFIG;\n    } else {\n      springConfig = SpringConfig.fromBouncinessAndSpeed(bounciness, speed);\n    }\n    return this.createSpringWithConfig(springConfig);\n  };\n\n  /**\n   * Add a spring with the provided SpringConfig.\n   * @public\n   */\n\n\n  SpringSystem.prototype.createSpringWithConfig = function createSpringWithConfig(springConfig) {\n    var spring = new Spring(this);\n    this.registerSpring(spring);\n    spring.setSpringConfig(springConfig);\n    return spring;\n  };\n\n  /**\n   * Check if a SpringSystem is idle or active. If all of the Springs in the\n   * SpringSystem are at rest, i.e. the physics forces have reached equilibrium,\n   * then this method will return true.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getIsIdle = function getIsIdle() {\n    return this._isIdle;\n  };\n\n  /**\n   * Retrieve a specific Spring from the SpringSystem by id. This\n   * can be useful for inspecting the state of a spring before\n   * or after an integration loop in the SpringSystem executes.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getSpringById = function getSpringById(id) {\n    return this._springRegistry[id];\n  };\n\n  /**\n   * Get a listing of all the springs registered with this\n   * SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.getAllSprings = function getAllSprings() {\n    var vals = [];\n    for (var _id in this._springRegistry) {\n      if (this._springRegistry.hasOwnProperty(_id)) {\n        vals.push(this._springRegistry[_id]);\n      }\n    }\n    return vals;\n  };\n\n  /**\n   * Manually add a spring to this system. This is called automatically\n   * if a Spring is created with SpringSystem#createSpring.\n   *\n   * This method sets the spring up in the registry so that it can be solved\n   * in the solver loop.\n   * @public\n   */\n\n\n  SpringSystem.prototype.registerSpring = function registerSpring(spring) {\n    this._springRegistry[spring.getId()] = spring;\n  };\n\n  /**\n   * Deregister a spring with this SpringSystem. The SpringSystem will\n   * no longer consider this Spring during its integration loop once\n   * this is called. This is normally done automatically for you when\n   * you call Spring#destroy.\n   * @public\n   */\n\n\n  SpringSystem.prototype.deregisterSpring = function deregisterSpring(spring) {\n    removeFirst(this._activeSprings, spring);\n    delete this._springRegistry[spring.getId()];\n  };\n\n  SpringSystem.prototype.advance = function advance(time, deltaTime) {\n    while (this._idleSpringIndices.length > 0) {\n      this._idleSpringIndices.pop();\n    }\n    for (var i = 0, len = this._activeSprings.length; i < len; i++) {\n      var spring = this._activeSprings[i];\n      if (spring.systemShouldAdvance()) {\n        spring.advance(time / 1000.0, deltaTime / 1000.0);\n      } else {\n        this._idleSpringIndices.push(this._activeSprings.indexOf(spring));\n      }\n    }\n    while (this._idleSpringIndices.length > 0) {\n      var idx = this._idleSpringIndices.pop();\n      idx >= 0 && this._activeSprings.splice(idx, 1);\n    }\n  };\n\n  /**\n   * This is the main solver loop called to move the simulation\n   * forward through time. Before each pass in the solver loop\n   * onBeforeIntegrate is called on an any listeners that have\n   * registered themeselves with the SpringSystem. This gives you\n   * an opportunity to apply any constraints or adjustments to\n   * the springs that should be enforced before each iteration\n   * loop. Next the advance method is called to move each Spring in\n   * the systemShouldAdvance forward to the current time. After the\n   * integration step runs in advance, onAfterIntegrate is called\n   * on any listeners that have registered themselves with the\n   * SpringSystem. This gives you an opportunity to run any post\n   * integration constraints or adjustments on the Springs in the\n   * SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.loop = function loop(currentTimeMillis) {\n    var listener = void 0;\n    if (this._lastTimeMillis === -1) {\n      this._lastTimeMillis = currentTimeMillis - 1;\n    }\n    var ellapsedMillis = currentTimeMillis - this._lastTimeMillis;\n    this._lastTimeMillis = currentTimeMillis;\n\n    var i = 0;\n    var len = this.listeners.length;\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i];\n      listener.onBeforeIntegrate && listener.onBeforeIntegrate(this);\n    }\n\n    this.advance(currentTimeMillis, ellapsedMillis);\n    if (this._activeSprings.length === 0) {\n      this._isIdle = true;\n      this._lastTimeMillis = -1;\n    }\n\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i];\n      listener.onAfterIntegrate && listener.onAfterIntegrate(this);\n    }\n\n    if (!this._isIdle) {\n      this.looper.run();\n    }\n  };\n\n  /**\n   * Used to notify the SpringSystem that a Spring has become displaced.\n   * The system responds by starting its solver loop up if it is currently idle.\n   */\n\n\n  SpringSystem.prototype.activateSpring = function activateSpring(springId) {\n    var spring = this._springRegistry[springId];\n    if (this._activeSprings.indexOf(spring) === -1) {\n      this._activeSprings.push(spring);\n    }\n    if (this.getIsIdle()) {\n      this._isIdle = false;\n      this.looper.run();\n    }\n  };\n\n  /**\n   * Add a listener to the SpringSystem to receive before/after integration\n   * notifications allowing Springs to be constrained or adjusted.\n   * @public\n   */\n\n\n  SpringSystem.prototype.addListener = function addListener(listener) {\n    this.listeners.push(listener);\n  };\n\n  /**\n   * Remove a previously added listener on the SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.removeListener = function removeListener(listener) {\n    removeFirst(this.listeners, listener);\n  };\n\n  /**\n   * Remove all previously added listeners on the SpringSystem.\n   * @public\n   */\n\n\n  SpringSystem.prototype.removeAllListeners = function removeAllListeners() {\n    this.listeners = [];\n  };\n\n  return SpringSystem;\n}();\n\nvar index = _extends({}, Loopers, {\n  OrigamiValueConverter: OrigamiValueConverter,\n  MathUtil: MathUtil,\n  Spring: Spring,\n  SpringConfig: SpringConfig,\n  SpringSystem: SpringSystem,\n  util: _extends({}, util, MathUtil)\n});\n\nreturn index;\n\n})));\n","import { SpringSystem } from \"rebound\"\n\nconst getViewportCoords = () => {\n  return {\n    height: document.documentElement.clientHeight,\n    width: document.documentElement.clientWidth\n  }\n}\n\nconst getScrollHeight = () => {\n  // insane code courtesy of https://javascript.info/size-and-scroll-window\n  return Math.max(\n    document.body.scrollHeight,\n    document.documentElement.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.offsetHeight,\n    document.body.clientHeight,\n    document.documentElement.clientHeight\n  )\n}\n\nconst rectInViewport = (\n  { top, bottom, left, right },\n  { width: windowWidth, height: windowHeight }\n) => {\n  return top < windowHeight && bottom > 0 && left < windowWidth && right > 0\n}\n\nconst rectCloseToViewport = ({ top, bottom }, { height: windowHeight }) => {\n  return top < windowHeight * 3 && bottom > -windowHeight * 2\n}\n\nconst initScrollBounce = ({ effectMultiplier = 2 } = {}) => {\n  const springSystem = new SpringSystem()\n\n  const bounceChildren = Array.from(\n    document.querySelectorAll(\"[data-bounce-id]\")\n  )\n\n  let offset = window.pageYOffset\n\n  const springs = bounceChildren\n    .map(child => {\n      const spring = springSystem.createSpring()\n\n      spring.addListener({\n        onSpringUpdate(_spring) {\n          const val = _spring.getCurrentValue()\n          child.style.transform = `translateY(${val}px)`\n        }\n      })\n      return [child, spring]\n    })\n    .reduce((acc, curr) => {\n      acc[curr[0].dataset.bounceId] = curr[1]\n      return acc\n    }, {})\n\n  const resetSprings = () => {\n    Object.keys(springs).forEach(s => {\n      springs[s].setEndValue(0)\n    })\n  }\n\n  let cache = {}\n\n  const getCenter = bounding => {\n    return bounding.top + bounding.height / 2\n  }\n\n  const onScroll = () => {\n    if (!cache.scrollHeight) cache.scrollHeight = getScrollHeight()\n\n    const fastScroll = Math.abs(diff) > cache.viewportCoords.height\n    if (fastScroll) return\n\n    const newOffset = window.pageYOffset\n\n    if (newOffset <= 0) return\n\n    if (newOffset >= cache.scrollHeight - cache.viewportCoords.height) {\n      return\n    }\n    const diff = offset - newOffset\n\n    const closestChild = document.querySelector([\n      `[data-bounce-id=\"${cache.closestBounceId}\"]`\n    ])\n\n    const closestChildIndex = bounceChildren.indexOf(closestChild)\n\n    const animatedChildrenDict = {}\n\n    let animatedAboveIndex = closestChildIndex - 1\n    let animatedBelowIndex = closestChildIndex + 1\n\n    const scrollDown = diff > 0\n\n    if (scrollDown) {\n      while (true) {\n        const el = bounceChildren[animatedAboveIndex]\n        if (!el) break\n        const bounding = el.getBoundingClientRect()\n        const isAnimated = rectCloseToViewport(bounding, cache.viewportCoords)\n        if (!isAnimated) break\n        animatedChildrenDict[el.dataset.bounceId] = bounding\n        animatedAboveIndex -= 1\n      }\n    } else {\n      while (true) {\n        const el = bounceChildren[animatedBelowIndex]\n        if (!el) break\n        const bounding = el.getBoundingClientRect()\n        const isAnimated = rectCloseToViewport(bounding, cache.viewportCoords)\n        if (!isAnimated) break\n        animatedChildrenDict[el.dataset.bounceId] = bounding\n        animatedBelowIndex += 1\n      }\n    }\n\n    const animatedChildren = bounceChildren\n      .filter(c => {\n        return animatedChildrenDict[c.dataset.bounceId]\n      })\n      .map(c => {\n        return [c, animatedChildrenDict[c.dataset.bounceId]]\n      })\n\n    bounceChildren\n      .filter(c => {\n        return !animatedChildrenDict[c.dataset.bounceId]\n      })\n      .forEach(c => {\n        c.style.willChange = \"\"\n        springs[c.dataset.bounceId].setEndValue(0)\n      })\n\n    animatedChildren.forEach(([child, bounding]) => {\n      child.style.willChange = \"transform\"\n\n      const spring = springs[child.dataset.bounceId]\n\n      let resistance =\n        Math.abs(cache.clientY - getCenter(bounding)) /\n        cache.viewportCoords.height\n\n      resistance = resistance * effectMultiplier\n\n      spring.setEndValue(-diff * resistance)\n    })\n\n    offset = newOffset\n  }\n\n  let scrollListener = false\n\n  const onTouchStart = event => {\n    if (!scrollListener)\n      scrollListener = window.addEventListener(\"scroll\", onScroll)\n    cache.clientY = event.targetTouches[0].clientY\n\n    cache.viewportCoords = getViewportCoords()\n\n    const closestElTuple = bounceChildren.reduce((acc, curr, i, source) => {\n      if (acc.length && acc[0] !== source[i - 1]) return acc\n      const bounding = curr.getBoundingClientRect()\n      if (!rectInViewport(bounding, cache.viewportCoords)) return acc\n      if (\n        acc.length === 0 ||\n        Math.abs(cache.clientY - getCenter(bounding)) <\n          Math.abs(cache.clientY - getCenter(acc[1]))\n      ) {\n        return [curr, bounding]\n      }\n      return acc\n    }, [])\n\n    cache.closestBounceId = closestElTuple[0].dataset.bounceId\n  }\n\n  const onTouchEnd = () => {\n    window.removeEventListener(\"scroll\", onScroll)\n    resetSprings()\n    cache = {}\n  }\n\n  const onTouchMove = event => {\n    cache.clientY = event.targetTouches[0].clientY\n  }\n\n  window.addEventListener(\"touchstart\", onTouchStart, false)\n  window.addEventListener(\"touchmove\", onTouchMove, false)\n  window.addEventListener(\"touchend\", onTouchEnd, false)\n\n  return () => {\n    window.removeEventListener(\"touchstart\", onTouchStart, false)\n    window.removeEventListener(\"touchmove\", onTouchMove, false)\n    window.removeEventListener(\"touchend\", onTouchEnd, false)\n  }\n}\n\nexport default initScrollBounce\n","import initBounce from \"../src/index\"\n\nconst ul = document.querySelector(\"ul\")\n\n;[...new Array(200).keys()].forEach(i => {\n  const li = document.createElement(\"li\")\n  li.dataset.bounceId = `bounce-id-${i}`\n  ul.appendChild(li)\n})\n\ninitBounce({ effectMultiplier: 3 })\n"]}