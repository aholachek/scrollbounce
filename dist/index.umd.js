!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rebound")):"function"==typeof define&&define.amd?define(["rebound"],t):e.scrollbounce=t(e.rebound)}(this,function(e){var t=function(e,t){var n=t.height;return e.top<3*n&&e.bottom>2*-n};return function(n,o){void 0===o&&(o={});var i=o.effectMultiplier;void 0===i&&(i=2);var r=new e.SpringSystem,d=[].concat(n.childNodes),c=window.pageYOffset,u=d.map(function(e){var t=r.createSpring();return t.addListener({onSpringUpdate:function(t){var n=t.getCurrentValue();e.style.transform="translateY("+n+"px)"}}),[e,t]}).reduce(function(e,t){return e[t[0].dataset.bounceId]=t[1],e},{}),a={},s=function(e){return e.top+e.height/2},l=function(){if(a.scrollHeight||(a.scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)),!(Math.abs(o)>a.viewportCoords.height)){var e=window.pageYOffset;if(!(e<=0||e>=a.scrollHeight-a.viewportCoords.height)){var o=c-e,r=n.querySelector(['[data-bounce-id="'+a.closestBounceId+'"]']),l=d.indexOf(r),f={},h=l-1,v=l+1;if(o>0)for(;;){var g=d[h];if(!g)break;var m=g.getBoundingClientRect();if(!t(m,a.viewportCoords))break;f[g.dataset.bounceId]=m,h-=1}else for(;;){var w=d[v];if(!w)break;var b=w.getBoundingClientRect();if(!t(b,a.viewportCoords))break;f[w.dataset.bounceId]=b,v+=1}var p=d.filter(function(e){return f[e.dataset.bounceId]}).map(function(e){return[e,f[e.dataset.bounceId]]});d.filter(function(e){return!f[e.dataset.bounceId]}).forEach(function(e){e.style.willChange="",u[e.dataset.bounceId].setEndValue(0)}),p.forEach(function(e){var t=e[0],n=e[1];t.style.willChange="transform";var r=u[t.dataset.bounceId],d=Math.abs(a.clientY-s(n))/a.viewportCoords.height;r.setEndValue(-o*(d*=i))}),c=e}}},f=!1,h=function(e){f||(f=window.addEventListener("scroll",l)),a.clientY=e.targetTouches[0].clientY,a.viewportCoords={height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};var t=d.reduce(function(e,t,n,o){if(e.length&&e[0]!==o[n-1])return e;var i,r,d=t.getBoundingClientRect();return(i=d).top<(r=a.viewportCoords).height&&i.bottom>0&&i.left<r.width&&i.right>0&&(0===e.length||Math.abs(a.clientY-s(d))<Math.abs(a.clientY-s(e[1])))?[t,d]:e},[]);a.closestBounceId=t[0].dataset.bounceId},v=function(){window.removeEventListener("scroll",l),Object.keys(u).forEach(function(e){u[e].setEndValue(0)}),a={}},g=function(e){a.clientY=e.targetTouches[0].clientY};return window.addEventListener("touchstart",h,!1),window.addEventListener("touchmove",g,!1),window.addEventListener("touchend",v,!1),function(){window.removeEventListener("touchstart",h,!1),window.removeEventListener("touchmove",g,!1),window.removeEventListener("touchend",v,!1)}}});
//# sourceMappingURL=index.umd.js.map
