!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rebound")):"function"==typeof define&&define.amd?define(["rebound"],t):e.scrollbounce=t(e.rebound)}(this,function(e){var t=function(e,t){var n=t.height;return e.top<3*n&&e.bottom>2*-n};return function(n){void 0===n&&(n={});var o=n.effectMultiplier;void 0===o&&(o=2);var r=new e.SpringSystem,i=Array.from(document.querySelectorAll("[data-bounce-id]")),d=window.pageYOffset,c=i.map(function(e){var t=r.createSpring();return t.addListener({onSpringUpdate:function(t){var n=t.getCurrentValue();e.style.transform="translateY("+n+"px)"}}),[e,t]}).reduce(function(e,t){return e[t[0].dataset.bounceId]=t[1],e},{}),u={},a=function(e){return e.top+e.height/2},s=function(){if(u.scrollHeight||(u.scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)),!(Math.abs(n)>u.viewportCoords.height)){var e=window.pageYOffset;if(!(e<=0||e>=u.scrollHeight-u.viewportCoords.height)){var n=d-e,r=document.querySelector(['[data-bounce-id="'+u.closestBounceId+'"]']),s=i.indexOf(r),l={},f=s-1,h=s+1;if(n>0)for(;;){var v=i[f];if(!v)break;var m=v.getBoundingClientRect();if(!t(m,u.viewportCoords))break;l[v.dataset.bounceId]=m,f-=1}else for(;;){var g=i[h];if(!g)break;var w=g.getBoundingClientRect();if(!t(w,u.viewportCoords))break;l[g.dataset.bounceId]=w,h+=1}var b=i.filter(function(e){return l[e.dataset.bounceId]}).map(function(e){return[e,l[e.dataset.bounceId]]});i.filter(function(e){return!l[e.dataset.bounceId]}).forEach(function(e){e.style.willChange="",c[e.dataset.bounceId].setEndValue(0)}),b.forEach(function(e){var t=e[0],r=e[1];t.style.willChange="transform";var i=c[t.dataset.bounceId],d=Math.abs(u.clientY-a(r))/u.viewportCoords.height;i.setEndValue(-n*(d*=o))}),d=e}}},l=!1,f=function(e){l||(l=window.addEventListener("scroll",s)),u.clientY=e.targetTouches[0].clientY,u.viewportCoords={height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};var t=i.reduce(function(e,t,n,o){if(e.length&&e[0]!==o[n-1])return e;var r,i,d=t.getBoundingClientRect();return(r=d).top<(i=u.viewportCoords).height&&r.bottom>0&&r.left<i.width&&r.right>0&&(0===e.length||Math.abs(u.clientY-a(d))<Math.abs(u.clientY-a(e[1])))?[t,d]:e},[]);u.closestBounceId=t[0].dataset.bounceId},h=function(){window.removeEventListener("scroll",s),Object.keys(c).forEach(function(e){c[e].setEndValue(0)}),u={}},v=function(e){u.clientY=e.targetTouches[0].clientY};return window.addEventListener("touchstart",f,!1),window.addEventListener("touchmove",v,!1),window.addEventListener("touchend",h,!1),function(){window.removeEventListener("touchstart",f,!1),window.removeEventListener("touchmove",v,!1),window.removeEventListener("touchend",h,!1)}}});
//# sourceMappingURL=index.umd.js.map
