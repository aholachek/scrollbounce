var e=require("rebound"),t=function(e,t){var n=t.height;return e.top<3*n&&e.bottom>2*-n};module.exports=function(n,o){void 0===o&&(o={});var r=o.effectMultiplier;void 0===r&&(r=2);var i=new e.SpringSystem,c=[].concat(n.childNodes),d=window.pageYOffset,a=c.map(function(e){var t=i.createSpring();return t.addListener({onSpringUpdate:function(t){var n=t.getCurrentValue();e.style.transform="translateY("+n+"px)"}}),[e,t]}).reduce(function(e,t){return e[t[0].dataset.bounceId]=t[1],e},{}),u={},s=function(e){return e.top+e.height/2},l=function(){if(u.scrollHeight||(u.scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)),!(Math.abs(o)>u.viewportCoords.height)){var e=window.pageYOffset;if(!(e<=0||e>=u.scrollHeight-u.viewportCoords.height)){var o=d-e,i=n.querySelector(['[data-bounce-id="'+u.closestBounceId+'"]']),l=c.indexOf(i),h={},f=l-1,v=l+1;if(o>0)for(;;){var g=c[f];if(!g)break;var m=g.getBoundingClientRect();if(!t(m,u.viewportCoords))break;h[g.dataset.bounceId]=m,f-=1}else for(;;){var w=c[v];if(!w)break;var b=w.getBoundingClientRect();if(!t(b,u.viewportCoords))break;h[w.dataset.bounceId]=b,v+=1}var p=c.filter(function(e){return h[e.dataset.bounceId]}).map(function(e){return[e,h[e.dataset.bounceId]]});c.filter(function(e){return!h[e.dataset.bounceId]}).forEach(function(e){e.style.willChange="",a[e.dataset.bounceId].setEndValue(0)}),p.forEach(function(e){var t=e[0],n=e[1];t.style.willChange="transform";var i=a[t.dataset.bounceId],c=Math.abs(u.clientY-s(n))/u.viewportCoords.height;i.setEndValue(-o*(c*=r))}),d=e}}},h=!1,f=function(e){h||(h=window.addEventListener("scroll",l)),u.clientY=e.targetTouches[0].clientY,u.viewportCoords={height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};var t=c.reduce(function(e,t,n,o){if(e.length&&e[0]!==o[n-1])return e;var r,i,c=t.getBoundingClientRect();return(r=c).top<(i=u.viewportCoords).height&&r.bottom>0&&r.left<i.width&&r.right>0&&(0===e.length||Math.abs(u.clientY-s(c))<Math.abs(u.clientY-s(e[1])))?[t,c]:e},[]);u.closestBounceId=t[0].dataset.bounceId},v=function(){window.removeEventListener("scroll",l),Object.keys(a).forEach(function(e){a[e].setEndValue(0)}),u={}},g=function(e){u.clientY=e.targetTouches[0].clientY};return window.addEventListener("touchstart",f,!1),window.addEventListener("touchmove",g,!1),window.addEventListener("touchend",v,!1),function(){window.removeEventListener("touchstart",f,!1),window.removeEventListener("touchmove",g,!1),window.removeEventListener("touchend",v,!1)}};
//# sourceMappingURL=index.js.map
